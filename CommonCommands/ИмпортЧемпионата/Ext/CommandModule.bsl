
&НаКлиенте
Процедура ОбработкаКоманды(ПараметрКоманды, ПараметрыВыполненияКоманды)
	УРЛ = УРЛ(ПараметрКоманды);
	ПоказатьВводСтроки(Новый ОписаниеОповещения("Импорт", ЭтотОбъект, ПараметрКоманды), УРЛ, "Импорт чемпионата");
КонецПроцедуры

&НаКлиенте
Процедура Импорт(УРЛ, Чемпионат) Экспорт
	Если НЕ ПустаяСтрока(УРЛ) Тогда
		Если ИмпортЧемпионата(УРЛ, Чемпионат) Тогда
			Оповестить("Матчи", Чемпионат);
		КонецЕсли;
	КонецЕсли;
КонецПроцедуры

&НаСервере
Функция ИмпортЧемпионата(Гиперссылка, Чемпионат)
	Возврат СерверныйФункции.ИмпортЧемпионата(Гиперссылка, Чемпионат);
КонецФункции

&НаСервере
Функция КомментарийКакУРЛ(Комментарий)
	Возврат СерверныйФункции.КомментарийКакУРЛ(Комментарий);
КонецФункции

&НаСервере
Функция УРЛ(Чемпионат)
	Ответ = КомментарийКакУРЛ(Чемпионат.Комментарий);
	Если ПустаяСтрока(Ответ) Тогда
		Ответ = КомментарийКакУРЛ(Чемпионат.Владелец.Комментарий);
	КонецЕсли;
	Если ПустаяСтрока(Ответ) Тогда
		//
	ИначеЕсли СтрНайти(Ответ, "/%1/") > 0 Тогда
		Ответ = СтрШаблон(Ответ, ФорматЧГ(Чемпионат.ДатаОкончания));
	ИначеЕсли СтрНайти(Ответ, ФорматЧГ(Чемпионат.ДатаОкончания)) = 0 Тогда
		Ответ = СтрШаблон(Ответ + "%1/", ФорматЧГ(Чемпионат.ДатаОкончания));
	КонецЕсли;
	Возврат Ответ;
КонецФункции
